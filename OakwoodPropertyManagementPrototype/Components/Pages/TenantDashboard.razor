@page "/tenant-dashboard"
@using OakwoodPropertyManagementPrototype.Models
@using OakwoodPropertyManagementPrototype.Data

<PageTitle>Tenant Dashboard</PageTitle>

<h1 class="text-center mb-4">Tenant Dashboard</h1>

@* Example for Tenant ID 1 *@
@{
    var tenant = SeedData.Tenants[0];
    var lease = SeedData.Leases.Find(l => l.TenantId == tenant.Id);
    var maintenanceRequests = SeedData.MaintenanceRequests.FindAll(r => r.TenantId == tenant.Id);
}

<div class="card p-4 mb-4 shadow">
    <h3>Welcome, @tenant.Name</h3>
    <p>Lease ID: #@lease.Id</p>
    <p>Unit: @lease.Unit</p>
    <p>Lease Start: @lease.StartDate.ToShortDateString() | Lease End: @lease.EndDate.ToShortDateString()</p>
    <p>Outstanding Rent: <strong>@lease.RentAmount.ToString("C0", System.Globalization.CultureInfo.CreateSpecificCulture("en-ZA"))</strong></p>

    <div class="mt-3">
        <a class="btn btn-primary me-2" href="/payment-page">Pay Rent</a>
        <a class="btn btn-secondary me-2" href="/maintenance-request">Submit Maintenance Request</a>
    </div>
</div>

<div class="card p-4 shadow">
    <h4>My Maintenance Requests</h4>
    <table class="table table-striped mt-3">
        <thead>
            <tr>
                <th>Request ID</th>
                <th>Title</th>
                <th>Status</th>
                <th>Date Submitted</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var req in maintenanceRequests)
            {
                <tr>
                    <td>@req.Id</td>
                    <td>@req.Title</td>
                    <td>@req.Status</td>
                    <td>@req.DateSubmitted.ToShortDateString()</td>
                </tr>
            }
        </tbody>
    </table>
</div>
